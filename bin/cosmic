#!/bin/sh
set -e

# Get the directory where this script is located
SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
COSMIC_LUA="${SCRIPT_DIR}/cosmic-lua"
RELEASE_URL="https://github.com/whilp/cosmic/releases/download/2026-01-19-1c3a9af/cosmic-lua"

# Download cosmic-lua if it doesn't exist
if [ ! -f "${COSMIC_LUA}" ]; then
    echo "Downloading cosmic-lua..." >&2
    curl -fsSL -o "${COSMIC_LUA}" "${RELEASE_URL}"
    chmod +x "${COSMIC_LUA}"
fi

# Execute cosmic-lua with all arguments
exec "${COSMIC_LUA}" "$@"
