# skill: integrate pr.lua into cosmic-lua

Adds skill dispatcher module to cosmic-lua, enabling `cosmic-lua -l skill update-pr` for PR management instead of running pr.lua as standalone script.

The skill module provides a clean extension point for adding more cosmic-lua subcommands in the future.

## Implementation

- lib/skill/init.lua - dispatcher that reads arg table for subcommands and routes to handlers
- lib/skill/cook.mk - build rules for skill modules, bundled into cosmic binary
- lib/cosmic/test_skill_pr.lua - tests for skill module loading and update-pr behavior
- lib/cosmic/cook.mk - updates cosmic build to include all lib_dirs with error handling
- lib/build/cook.mk - make update-pr prefers cosmic but falls back to lua
- lib/cook.mk - includes skill/cook.mk

## Design

The dispatcher pattern checks the arg table for known subcommands and rebuilds arg with subcommand-specific arguments before dispatching. Currently supports update-pr, easily extensible for more skills.

## Validation

- [x] tests pass (lib/cosmic/test_skill_pr.lua)
- [x] make update-pr works locally with cosmic
- [x] make update-pr falls back to lua when cosmic unavailable (CI compatible)
- [x] cosmic-lua -l skill update-pr shows help outside GitHub Actions
- [x] integration preserves existing pr.lua behavior
