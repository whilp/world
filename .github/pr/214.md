# build: reorganize makefile into focused sections

Move testing and linting infrastructure from main Makefile to new build.mk file for better organization and maintainability.

## Changes

- **build.mk** - new file containing all test/lint infrastructure:
  - organized by purpose (each tool section contains all related config)
  - shared infrastructure (manifests, file lists)
  - luatest section (test runner config, dependencies, targets)
  - luacheck section (linter config and targets)
  - ast-grep section (structural search)
  - teal section (type checker)
  - latest section (version checker)
  - build scripts (fetch, extract, install)

- **Makefile** - streamlined to focus on core concerns:
  - platform detection
  - output directory setup
  - bootstrap configuration
  - manifest variable definitions (defined early so cook.mk files can reference them)
  - include directives
  - LUA_PATH construction
  - high-level aggregate targets (check, test, bootstrap, clean)
  - lib/build test dependencies (at end, after includes, so manifest variables are available)

- **lib/build/cook.mk** - simplified to only library build rules and update-pr target

## Organization

build.mk groups each tool's configuration together rather than organizing by variable type. Each section contains all related variables, dependencies, and targets in one cohesive block, making it easier to understand and modify individual tools.

lib/build test dependencies are placed at the end of the main Makefile (after includes) to:
- separate them from the general luatest infrastructure in build.mk
- ensure manifest variables are available when referenced
- work around Make's requirement that target-specific variables (TEST_ENV, TEST_ARGS) must be in the same file as the pattern rule

## Validation

- generated manifest files before/after refactor - identical (no behavior changes)
- all tests pass
- build system fully functional
