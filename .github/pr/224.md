# build: restore lua checkers with unified reporting

Restores luacheck and teal checking following the ast-grep pattern established in #217. All three checkers (ast-grep, luacheck, teal) now use the same incremental checking infrastructure with unified reporting.

## Implementation

**Checker runners:**
- 3p/luacheck/run-luacheck.lua - incremental luacheck runner for individual files
- 3p/tl/run-teal.lua - incremental teal type checker runner for individual files
- 3p/ast-grep/run-astgrep.lua - updated to always return 0 (non-blocking)

**Individual reporters:**
- 3p/luacheck/report-luacheck.lua - reports luacheck results
- 3p/tl/report-teal.lua - reports teal results
- 3p/ast-grep/report-astgrep.lua - reports ast-grep results

**Unified reporting:**
- lib/build/check-report.lua - aggregates all .checked files across checkers and shows combined statistics

**Build integration:**
- 3p/tl/version.lua - teal v0.24.8 type checker
- 3p/tl/cook.mk - teal module configuration
- 3p/luacheck/cook.mk - updated with runner and reporter files
- Makefile - targets for astgrep, luacheck, teal, and unified check

## Design

Each checker follows the same pattern:
1. Runner checks individual files and writes structured .checked files (pass/fail/skip/ignore)
2. Individual reporter shows results for that checker
3. Unified check-report.lua aggregates all checkers for `make check`

All checkers return 0 to enable parallel execution without early termination. The final exit code is determined by the reporter based on failures.

## Validation

- [x] `make check` runs all three checkers in parallel and shows unified report
- [x] `make astgrep`, `make luacheck`, `make teal` run individual checkers
- [x] incremental builds only recheck changed files (~4s on clean run)
- [x] skip/ignore directives work in source files
- [x] unified report shows combined statistics (78 checks across 26 files)
- [x] failures from all checkers shown in single FAILURES section
- [x] consistent output format with icons (✓✗→○) across all checkers

## Results

Current status:
- ast-grep: 20 passed, 2 skipped, 4 ignored
- luacheck: 22 passed, 4 ignored
- teal: 2 passed, 20 failed (type errors expected), 4 ignored
- Total: 78 checks across all checkers
