# settings: use SessionStart hook to set PATH

Fix PATH prepending by using `CLAUDE_ENV_FILE` in bootstrap target instead of the env section in settings.json.

## Problem

PR #226 removed `"PATH": "$CLAUDE_PROJECT_DIR/bin:$PATH"` from settings.json because it broke Claude web environment:

- `$CLAUDE_PROJECT_DIR` is empty in Claude web
- PATH became `/bin:$PATH` (absolute system `/bin`)
- System commands like `make`, `tr`, `bash`, `base64` couldn't be found
- Result: `SessionStart:startup Failed with non-blocking status code: /bin/sh: 1: make: not found`

The env section doesn't support variable expansion in Claude web.

## Solution

Use the `CLAUDE_ENV_FILE` mechanism in the bootstrap make target:

```makefile
.PHONY: bootstrap
bootstrap: $(bootstrap_files)
	@if [ -n "$$CLAUDE_ENV_FILE" ]; then \
		echo "export PATH=\"$(CURDIR)/bin:$$PATH\"" >> "$$CLAUDE_ENV_FILE"; \
	fi
```

This works because:
- SessionStart hook already runs `make bootstrap`
- The bootstrap target writes PATH to `$CLAUDE_ENV_FILE` if set
- Variables written to `$CLAUDE_ENV_FILE` persist for the entire session
- Works in both local Claude Code and Claude web

## Implementation

Added bootstrap target to `Makefile` that:
1. Builds bootstrap files (`$(bootstrap_files)`)
2. Writes PATH export to `$CLAUDE_ENV_FILE` if the variable is set

## Result

- `./bin/run-test` is available in PATH during sessions
- System PATH is preserved (no clobbering)
- Works in both local and web environments
- No additional SessionStart hook needed (reuses existing bootstrap hook)

## References

- Fixes: f6c577d (Remove PATH variable from settings.json #226)
- Restores: 1d613c5 (build: add run-test utility #225)
