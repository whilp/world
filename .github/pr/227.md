# settings: use SessionStart hook to set PATH

Fix PATH prepending by using `CLAUDE_ENV_FILE` in SessionStart hook instead of the env section in settings.json.

## Problem

PR #226 removed `"PATH": "$CLAUDE_PROJECT_DIR/bin:$PATH"` from settings.json because it broke Claude web environment:

- `$CLAUDE_PROJECT_DIR` is empty in Claude web
- PATH became `/bin:$PATH` (absolute system `/bin`)
- System commands like `make`, `tr`, `bash`, `base64` couldn't be found
- Result: `SessionStart:startup Failed with non-blocking status code: /bin/sh: 1: make: not found`

The env section doesn't support variable expansion in Claude web.

## Solution

Use the `CLAUDE_ENV_FILE` mechanism in SessionStart hooks:

```bash
echo "export PATH=\"$CLAUDE_PROJECT_DIR/bin:$PATH\"" >> "$CLAUDE_ENV_FILE"
```

This works because:
- SessionStart hooks run in bash where `$CLAUDE_PROJECT_DIR` is properly expanded
- Variables written to `$CLAUDE_ENV_FILE` persist for the entire session
- Works in both local Claude Code and Claude web

## Implementation

Modified `.claude/settings.json` to add a hook that writes PATH to `$CLAUDE_ENV_FILE` before running bootstrap:

```json
{
  "hooks": {
    "SessionStart": [
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "command": "echo \"export PATH=\\\"$CLAUDE_PROJECT_DIR/bin:$PATH\\\"\" >> \"$CLAUDE_ENV_FILE\""
          },
          {
            "type": "command",
            "command": "make --no-print-directory -C \"$CLAUDE_PROJECT_DIR\" bootstrap"
          }
        ]
      }
    ]
  }
}
```

## Result

- `./bin/run-test` is available in PATH during sessions
- System PATH is preserved (no clobbering)
- Works in both local and web environments

## References

- Fixes: f6c577d (Remove PATH variable from settings.json #226)
- Restores: 1d613c5 (build: add run-test utility #225)
